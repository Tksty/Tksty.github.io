<!DOCTYPE html>
<html>
  <head>
    <title>Upload File to GitHub</title>
  </head>
  <body>
    <h1>Upload File to GitHub</h1>
    <form>
      <label for="file">Choose a file:</label>
      <input type="file" id="file" name="file">
      <button type="button" onclick="uploadFile()">Upload</button>
    </form>
    <div id="message"></div>
  </body>
  <script>
  function uploadFile() {
    var fileInput = document.getElementById("file");
    var file = fileInput.files[0];
    var reader = new FileReader();
    reader.readAsText(file);
    reader.onload = function(event) {
      var content = event.target.result;
      var filename = file.name;
      var url = "https://api.github.com/repos/Tksty/moviehub/contents/test";
      var xhr = new XMLHttpRequest();
      xhr.open("PUT", url);
      xhr.setRequestHeader("Authorization", "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");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          var response = JSON.parse(xhr.responseText);
          if (xhr.status === 200 || xhr.status === 201) {
            document.getElementById("message").innerHTML = "File uploaded successfully!";
          } else {
            document.getElementById("message").innerHTML = "Error uploading file: " + response.message;
          }
        }
      };
      xhr.send(JSON.stringify({
        message: "Create test",
        content: btoa(content),
        branch: "main"
      }));
    };
  }
</script>

</html>
